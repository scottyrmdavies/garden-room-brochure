<!DOCTYPE html>
<html>
<head>
<title>Garden Rooms - Real Curl</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js"></script>
<style>
body { margin:0; background:#f5f5f5; font-family:Georgia; overflow:hidden; }
#book { perspective:1800px; width:800px; height:600px; margin:auto; position:relative; }
.page {
  position:absolute; width:400px; height:600px; background:#fff;
  box-shadow:0 0 8px rgba(0,0,0,0.2);
  overflow:hidden; transform-origin:0 0; transform-style:preserve-3d;
  z-index:1; cursor:grab;
}
.page .front, .page .back {
  position:absolute; width:100%; height:100%; background-size:cover;
  background-position:center;
}
.page .front { z-index:2; }
.page .back  { z-index:1; transform:rotateY(180deg); }
#cue {
  position:absolute; bottom:30px; right:40px; font-size:60px;
  opacity:0.5; color:#555; cursor:pointer; z-index:0;
}
</style>
</head>
<body>
<div id="cue">â†’</div>

<div id="book">
  <div class="page">
    <div class="front" style="background-image:url(page1.jpg);">
      <div style="padding:50px;color:#000;font-size:20px;">
        <h1>Welcome</h1><p>Turn the page.</p>
      </div>
    </div>
    <div class="back" style="background-image:url(page2.jpg);">
      <div style="padding:50px;color:#000;font-size:20px;">
        <h1>Model A</h1><p>Office. Gym. Chill.</p>
      </div>
    </div>
  </div>
  <div class="page">
    <div class="front" style="background-image:url(page3.jpg);">
      <div style="padding:50px;color:#000;font-size:20px;">
        <h1>Model B</h1><p>Family. Double glazed.</p>
      </div>
    </div>
    <div class="back" style="background-image:url(page4.jpg);">
      <div style="padding:50px;color:#000;font-size:20px;">
        <h1>Call us</h1><p>01234 567890</p>
      </div>
    </div>
  </div>
</div>

<script>
let dragging = false, startX, startAngle = 0;

$("#cue").click(function(){ $(this).hide(); });

$("#book").on("mousedown touchstart", ".page", function(e){
  e.preventDefault();
  dragging = true;
  startX = e.pageX || e.touches[0 ^)]+)/)?.[1] || 0);
});

$(document).on("mousemove touchmove", function(e){
  if(!dragging) return;
  let x = e.pageX || e.touches[0].pageX;
  let delta = (x - startX) / 4;
  let angle = startAngle - delta;
  let page = $("#book .page:first-child");

  if(angle < 0 && angle > -180){
    page.css("transform", `rotateY(${angle}deg) skewY(${angle / 12}deg)`);
    page.find('.front').css('box-shadow', `0 10px 20px rgba(0,0,0,0.${Math.round(Math.abs(angle)/10)})`);
  }
});

$(document).on("mouseup touchend", function(){
  if(!dragging) return;
  dragging = false;
  let page = $("#book .page:first-child");
  let angle = parseFloat(page.css("transform").match(/rotateY\(([^)]+)/)?.[1] || 0);

  if(angle < -90){
    page.transition({ rotateY: -180, skewY: 0 }, 800, 'easeInOutCubic', function(){
      $(this).css({ zIndex: 1, transform: 'rotateY(0deg)' }).hide();
      $(this).next().show();
    });
  } else {
    page.transition({ rotateY: 0, skewY: 0 }, 500);
  }
});
</script>
</body>
</html>
