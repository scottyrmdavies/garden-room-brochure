<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calidwell Homes | Luxury Garden Rooms</title>
    <style>
        :root {
            --book-height: 595px;
            --book-width: 842px;
            --paper: #ffffff;
            --bg: #121212;
        }

        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: var(--bg);
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }

        .book-container {
            position: relative;
            width: var(--book-width);
            height: var(--book-height);
            box-shadow: 0 50px 100px rgba(0,0,0,0.9);
        }

        .book {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            background: var(--paper);
        }

        .side {
            width: 50%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .side img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            cursor: grab;
            touch-action: none;
        }

        .spine {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: rgba(0,0,0,0.15);
            z-index: 50;
        }

        .controls {
            margin-top: 25px;
            color: #666;
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<div class="book-container">
    <div class="book">
        <div class="spine"></div>
        <div class="side"><img id="left-img" src="" alt="Left Page"></div>
        <div class="side"><img id="right-img" src="" alt="Right Page"></div>
        <canvas id="pageCanvas"></canvas>
    </div>
</div>

<div class="controls">Drag Center To Flip â€¢ Spread <span id="pnum">1</span> of 7</div>

<script>
    const canvas = document.getElementById('pageCanvas');
    const ctx = canvas.getContext('2d');
    const leftImg = document.getElementById('left-img');
    const rightImg = document.getElementById('right-img');
    const pNumDisplay = document.getElementById('pnum');

    // Mapped 14 pages into 7 dual-page spreads
    const spreads = [
        { left: "page1.jpg", right: "page2.jpg" }, // Cover & Intro [cite: 1, 5]
        { left: "page3.jpg", right: "page4.jpg" }, // Built Properly & Our Approach [cite: 13, 21]
        { left: "page5.jpg", right: "page6.jpg" }, // Beyond Garden Rooms & Hampton [cite: 36, 42]
        { left: "page7.jpg", right: "page8.jpg" }, // Chelsea & Kew [cite: 52, 63]
        { left: "page9.jpg", right: "page10.jpg" }, // Eden & Specs [cite: 72, 82]
        { left: "page11.jpg", right: "page12.jpg" }, // Model Specs [cite: 85, 116]
        { left: "page13.jpg", right: "page14.jpg" }  // Eden Layouts [cite: 155, 193]
    ];

    let currentSpread = 0;
    let isDragging = false;
    let activeSide = null;
    let cornerX = 0;
    let canvasW, canvasH;

    function init() {
        canvasW = canvas.offsetWidth;
        canvasH = canvas.offsetHeight;
        canvas.width = canvasW;
        canvas.height = canvasH;
        updateContent();
    }

    function draw() {
        ctx.clearRect(0, 0, canvasW, canvasH);
        if (!isDragging) return;

        ctx.save();
        if (activeSide === 'right') {
            const rollWidth = 60;
            const grad = ctx.createLinearGradient(cornerX - rollWidth, 0, cornerX + rollWidth, 0);
            grad.addColorStop(0, 'rgba(0,0,0,0)');
            grad.addColorStop(0.5, 'rgba(0,0,0,0.3)');
            grad.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = grad;
            ctx.fillRect(cornerX - rollWidth, 0, (canvasW - cornerX) + rollWidth, canvasH);
        } else {
            const rollWidth = 60;
            const grad = ctx.createLinearGradient(cornerX - rollWidth, 0, cornerX + rollWidth, 0);
            grad.addColorStop(0, 'rgba(0,0,0,0)');
            grad.addColorStop(0.5, 'rgba(0,0,0,0.3)');
            grad.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, cornerX + rollWidth, canvasH);
        }
        ctx.restore();
    }

    function start(e) {
        const rect = canvas.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
        isDragging = true;
        activeSide = x > canvasW / 2 ? 'right' : 'left';
    }

    function move(e) {
        if (!isDragging) return;
        const rect = canvas.getBoundingClientRect();
        cornerX = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
        const mid = canvasW / 2;
        const target = activeSide === 'right' ? rightImg : leftImg;
        let ratio = activeSide === 'right' ? (cornerX - mid) / mid : (mid - cornerX) / mid;
        target.style.opacity = Math.max(0, ratio);
        draw();
    }

    function stop() {
        if (!isDragging) return;
        const mid = canvasW / 2;
        if (activeSide === 'right' && cornerX < mid && currentSpread < spreads.length - 1) currentSpread++;
        else if (activeSide === 'left' && cornerX > mid && currentSpread > 0) currentSpread--;

        isDragging = false;
        leftImg.style.opacity = 1;
        rightImg.style.opacity = 1;
        updateContent();
        ctx.clearRect(0, 0, canvasW, canvasH);
    }

    canvas.addEventListener('mousedown', start);
    canvas.addEventListener('touchstart', start);
    window.addEventListener('mousemove', move);
    window.addEventListener('touchmove', move);
    window.addEventListener('mouseup', stop);
    window.addEventListener('touchend', stop);

    function updateContent() {
        leftImg.src = spreads[currentSpread].left;
        rightImg.src = spreads[currentSpread].right;
        pNumDisplay.innerText = (currentSpread + 1);
    }

    window.onload = init;
</script>
</body>
</html>
