<!DOCTYPE html>
<html>
<head>
  <title>Real Paper Roll</title>
  <style>
    body { margin:0; background:#f9f9f9; overflow:hidden; font-family:Georgia; }

    #book {
      width:800px; height:600px; margin:auto; position:relative;
      perspective: 2000px;
      transform-style: preserve-3d;
    }

    .page {
      position:absolute; width:400px; height:600px; background:#fff;
      box-shadow:0 0 8px rgba(0,0,0,0.15);
      overflow:hidden;
      transform-origin:0 0;
      transform-style: preserve-3d;
      z-index:1;
      cursor:grab;
    }

    .page .front, .page .back {
      position:absolute; width:100%; height:100%;
      background-size:cover; background-position:center;
    }

    .page .front { z-index:2; }
    .page .back  { z-index:1; transform:rotateY(180deg); }

    #cue {
      position:absolute; bottom:30px; right:40px;
      font-size:60px; opacity:0.5; cursor:pointer;
      user-select:none; z-index:0;
    }
  </style>
</head>
<body>
<div id="cue">â†’</div>
<div id="book">
  <div class="page" style="background:#fff url('page1.jpg')">
    <div class="front">Page 1</div>
    <div class="back">Page 2</div>
  </div>
  <div class="page" style="background:#fff url('page3.jpg')">
    <div class="front">Page 3</div>
    <div class="back">Page 4</div>
  </div>
</div>

<script>
let dragging = false, startX, startAngle = 0;

$("#cue").click(function(){
  $(this).hide();
});

$("#book").on("mousedown touchstart", ".page", function(e){
  e.preventDefault();
  dragging = true;
  startX = e.pageX || e.touches[0].pageX;
  startAngle = parseFloat($(this).css("transform").match(/rotateY\(([^)]+)/)?.[1] || 0);
});

$(document).on("mousemove touchmove", function(e){
  if(!dragging) return;
  let x = e.pageX || e.touches[0].pageX;
  let delta = (x - startX) / 4;

  let angle = startAngle - delta;
  let page = $("#book .page:first-child");

  if(angle < 0 && angle > -180){
    page.css("transform", `rotateY(${angle}deg) skewY(${angle / 12}deg)`);
    page.find('.front').css('box-shadow', `0 10px 20px rgba(0,0,0,0.${Math.round(Math.abs(angle)/10)})`);
  }
});

$(document).on("mouseup touchend", function(){
  if(!dragging) return;
  dragging = false;
  let page = $("#book .page:first-child");
  let angle = parseFloat(page.css("transform").match(/rotateY\(([^)]+)/)?.[1] || 0);

  if(angle < -90){
    page.transition({ rotateY: -180, skewY: 0 }, 800, 'easeInOutCubic', function(){
      $(this).css({ zIndex: 1, transform: 'rotateY(0deg)' }).hide();
      $(this).next().show();
    });
  } else {
    page.transition({ rotateY: 0, skewY: 0 }, 500);
  }
});
</script>

<!-- Add jQuery + jQuery Transit -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js"></script>

</body>
</html>
